{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="promocao-container">
  <h2 class="titulo-centralizado">üéØ Gerenciar Promo√ß√µes</h2>

  <!-- Formul√°rio para criar nova promo√ß√£o -->
  <form method="post" enctype="multipart/form-data" class="form-promocao">
    {% csrf_token %}
    <div class="form-group">
      {{ form.titulo.label_tag }}
      {{ form.titulo }}
    </div>

    <div class="form-group">
      {{ form.descricao.label_tag }}
      {{ form.descricao }}
    </div>

    <div class="form-group">
      {{ form.imagem.label_tag }}
      {{ form.imagem }}
    </div>

<div class="form-group">
  <label class="form-label">{{ form.pizzas.label }}</label>
  <div class="scroll-box">
    {% for checkbox in form.pizzas %}
      <div class="checkbox-row">
        <span class="item-label">{{ checkbox.choice_label }}</span>
        {{ checkbox.tag }}
      </div>
    {% endfor %}
  </div>
</div>

<div class="form-group">
  <label class="form-label">{{ form.bebidas.label }}</label>
  <div class="scroll-box">
    {% for checkbox in form.bebidas %}
      <div class="checkbox-row">
        <span class="item-label">{{ checkbox.choice_label }}</span>
        {{ checkbox.tag }}
      </div>
    {% endfor %}
  </div>
</div>


    <div class="form-group">
      {{ form.preco.label_tag }}
      {{ form.preco }}
    </div>

    <div class="form-group checkbox-group">
     {{ form.ativa.label_tag }}{{ form.ativa }} 
    </div>

    <button type="submit" class="submit-btn">‚ûï Criar Promo√ß√£o</button>
  </form>

  <hr class="linha-divisoria">

  <h3 class="titulo-centralizado">üìã Promo√ß√µes Atuais</h3>
  <ul style="list-style: none; padding: 0;">
  {% for promo in promocoes %}
    <li class="item-promocao">
      <strong>{{ promo.titulo }}</strong> ‚Äî
      {% if promo.ativa %}‚úÖ Ativa{% else %}‚õî Inativa{% endif %}<br>

      <img src="{{ promo.imagem.url }}" alt="{{ promo.titulo }}"><br>

      {% if promo.pizzas.all %}
        <p>üçï <strong>Pizzas:</strong> {{ promo.pizzas.all|join:", " }}</p>
      {% endif %}

      {% if promo.bebidas.all %}
        <p>ü•§ <strong>Bebidas:</strong> {{ promo.bebidas.all|join:", " }}</p>
      {% endif %}

      <form method="post" action="{% url 'excluir_promocao' promo.id %}" style="display:inline-block; margin-top: 10px;">
        {% csrf_token %}
        <button type="submit" class="btn-deletar" onclick="return confirm('Tem certeza que deseja excluir esta promo√ß√£o?')">üóë Excluir</button>
      </form>
    </li>
  {% empty %}
    <p style="text-align: center;">Nenhuma promo√ß√£o cadastrada.</p>
  {% endfor %}
</ul>
</div>
{% endblock %}
