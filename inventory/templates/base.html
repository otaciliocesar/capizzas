{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% block title %}Capizzas{% endblock %}</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    
    <!-- CSS personalizado -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
  

    <!-- JS do Bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" defer></script>

    <link rel="icon" href="{% static 'img/capizzasicon.png' %}" type="image/png" />
</head>

<body>
<header class="header">
  <div class="logo">
    <a href="{% url 'home' %}">
      <img src="/media/pizzas/capizzas.png" alt="Capizzas">
    </a>
  </div>
  <nav>
    <a href="{% url 'cardapio' %}">Cardápio</a>
    <a href="{% url 'promocoes' %}">Promoções</a>
    <a href="{% url 'localizacao' %}">Localização</a>
    <a href="{% url 'sobre' %}">Sobre</a>
    <a href="{% url 'carrinho' %}">Fazer pedido</a>
    {% if user.is_authenticated and user.is_superuser %}
    <a href="{% url 'cadastropromocoes' %}">Gerir Promocões</a>
    <div class="dropdown">
    <div class="user-menu produtos-menu" tabindex="0" aria-haspopup="true" aria-expanded="false"> 
      Produtos
    </div>     
    <div class="user-dropdown" role="menu" aria-label="Menu de Produtos">
      <a href="{% url 'cadastropizza' %}" role="menuitem">Pizzas</a>
      <a href="{% url 'cadastrobebidas' %}" role="menuitem">Bebidas</a>
      <a href="{% url 'cadastrodiversos' %}" role="menuitem">Diversos</a>
    </div>
    </div>    
    {% endif %}

    

    {% if user.is_authenticated %}
      <div class="user-menu" tabindex="0" aria-haspopup="true" aria-expanded="false">
        <!-- Ícone de usuário SVG inline -->
        <svg class="user-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
          <path d="M12 12c2.7 0 5-2.3 5-5s-2.3-5-5-5-5 2.3-5 5 2.3 5 5 5zm0 2c-3.3 0-10 1.7-10 5v3h20v-3c0-3.3-6.7-5-10-5z"/>
        </svg>
        Olá, {{ user.first_name }}!
        <div class="user-dropdown" role="menu" aria-label="Menu do usuário">
          <a href="{% url 'editar_perfil' %}" role="menuitem">Editar Perfil</a>
          <a href="{% url 'meus_pedidos' %}" role="menuitem">Meus Pedidos</a>
          <form action="{% url 'logout' %}" method="post" style="margin: 0;">
            {% csrf_token %}
            <button type="submit" class="logout-btn" style="width: 100%; text-align: left; border: none; background:none; padding:10px 15px; cursor:pointer;">Logout</button>
          </form>
        </div>
      </div>

    {% elif request.session.cliente_nome %}
      Olá, {{ request.session.cliente_nome }}!
      <a href="{% url 'logout_cliente' %}" class="logout-btn">Logout</a>

    {% else %}
      <a href="{% url 'login' %}" class="login-btn">Login</a>
    {% endif %}
  </nav>
</header>

<main>
  {% block content %}
    {% block carrossel %}{% endblock %}
    {% block page_content %}{% endblock %}
  {% endblock %}
</main>

<footer>
  <div class="social-icons">
    <a href="https://www.tiktok.com" target="_blank"><img src="/media/pizzas/tiktok.png" alt="TikTok"></a>
    <a href="https://www.facebook.com" target="_blank"><img src="/media/pizzas/facebook.png" alt="Facebook"></a>
    <a href="https://www.instagram.com" target="_blank"><img src="/media/pizzas/instagram.png" alt="Instagram"></a>
  </div>
  <div class="last-update">Última atualização: Junho de 2025</div>
</footer>

</body>
</html>
